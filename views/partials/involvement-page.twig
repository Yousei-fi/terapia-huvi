{% set lang = lang ?? language ?? 'fi' %}
{% set slug = slug ?? 'osallistu' %}
{% set involvement_defaults = {
  'fi': {
    'eyebrow': 'Tue ja osallistu',
    'title': 'Humaania päihdepolitiikkaa ry toimii vapaaehtoisvoimin',
    'copy': '<p>Toimintamme rahoitetaan pääosin jäsenmaksuilla, lahjoituksilla ja verkkokaupan tuotoilla. Jos pidät parempaa päihdepolitiikkaa tärkeänä, voit tukea työtämme liittymällä jäseneksi tai osallistumalla vapaaehtoiseksi. Tarvitsemme kirjoittajia, kuvaajia, kouluttajia, vaikuttajia ja järjestäjiä – ennen kaikkea ihmisiä, jotka haluavat rakentaa inhimillisempää yhteiskuntaa.</p>',
    'cta_primary_label': 'Verkkokauppa & jäsenyydet',
    'cta_primary_url': 'https://holvi.com/shop/hpp-ry/',
    'cta_secondary_label': 'Liity jäseneksi',
    'cta_secondary_url': 'https://holvi.com/shop/hpp-ry/',
    'cta_tertiary_label': 'Tutustu sääntöihin',
    'cta_tertiary_url': '/saannot',
    'donation_text': 'Tilinumero lahjoituksia varten: <span class="font-semibold text-white">IBAN FI40 7997 7997 1034 99</span>, BIC HOLVFIHH.'
  },
  'en': {
    'eyebrow': 'Support & participate',
    'title': 'Humane Drug Policy Association runs on volunteer power',
    'copy': '<p>Membership fees, donations, and our online shop fund most of our work. If a more humane drug policy matters to you, join as a member or contribute your skills. We welcome writers, photographers, trainers, advocates, organisers—anyone committed to building a kinder society.</p>',
    'cta_primary_label': 'Online shop & membership',
    'cta_primary_url': 'https://holvi.com/shop/hpp-ry/',
    'cta_secondary_label': 'Join as a member',
    'cta_secondary_url': 'https://holvi.com/shop/hpp-ry/',
    'cta_tertiary_label': 'Read the statutes',
    'cta_tertiary_url': '/en/statutes',
    'donation_text': 'Donation account: <span class="font-semibold text-white">IBAN FI40 7997 7997 1034 99</span>, BIC HOLVFIHH.'
  }
} %}
{% set involvement_data = involvement_defaults[lang] ?? involvement_defaults.fi %}
{% set opportunities_default = lang == 'fi'
  ? [
    { 'title': 'Vapaaehtoistehtävät', 'copy': 'Tule mukaan viestintään, tapahtumiin, vertaistukeen tai kehittämistyöhön – koulutamme ja tuemme tehtävässä.' },
    { 'title': 'Yritysyhteistyö', 'copy': 'Etsimme kumppaneita, joiden arvot kohtaavat omamme. Yhdessä voimme muuttaa rakenteita.' },
    { 'title': 'Vaikuttajaverkosto', 'copy': 'Liity politiikan, tutkimuksen ja palveluiden ammattilaisista koostuvaan verkostoomme.' }
  ]
  : [
    { 'title': 'Volunteer roles', 'copy': 'Join our communications, events, peer support, or development teams—we train and support you throughout.' },
    { 'title': 'Partnerships', 'copy': 'We collaborate with organisations that share our values to shift structures together.' },
    { 'title': 'Advocacy network', 'copy': 'Connect with professionals across policy, research, and services to drive reform.' }
  ]
%}
{% set opportunities = page_field_cards(slug, 'opportunities_' ~ lang, opportunities_default) %}

<section class="bg-brand-charcoal py-16 text-brand-white md:py-20">
  <div class="mx-auto max-w-6xl px-4">
    <span class="eyebrow text-white/80">{{ page_field(slug, 'eyebrow_' ~ lang, involvement_data.eyebrow) }}</span>
    <h1 class="section-heading text-white">{{ page_field(slug, 'title_' ~ lang, involvement_data.title) }}</h1>
    <div class="prose prose-invert max-w-none text-base text-white/85">
      {{ page_field(slug, 'content_' ~ lang, involvement_data.copy)|raw }}
    </div>
    <div class="mt-10 grid gap-6 md:grid-cols-3">
      {% for item in opportunities %}
        <article class="rounded-3xl border border-white/15 bg-white/10 p-6 backdrop-blur">
          <h2 class="text-lg font-semibold text-white">{{ item.title }}</h2>
          <p class="mt-3 text-sm text-white/80">{{ item.copy }}</p>
          {% if item.cta_label and item.cta_url %}
            <a href="{{ item.cta_url }}" class="mt-4 inline-flex items-center gap-2 text-sm font-semibold text-white transition hover:text-white/80">
              <span>{{ item.cta_label }}</span>
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M5 12h14" />
                <path d="M13 6l6 6-6 6" />
              </svg>
            </a>
          {% endif %}
        </article>
      {% endfor %}
    </div>
    <div class="mt-10 flex flex-wrap gap-4">
      <a href="{{ page_field(slug, 'cta_primary_url_' ~ lang, involvement_data.cta_primary_url) }}" class="btn-primary" target="_blank" rel="noopener">{{ page_field(slug, 'cta_primary_label_' ~ lang, involvement_data.cta_primary_label) }}</a>
      <a href="{{ page_field(slug, 'cta_secondary_url_' ~ lang, involvement_data.cta_secondary_url) }}" class="btn-secondary" target="_blank" rel="noopener">{{ page_field(slug, 'cta_secondary_label_' ~ lang, involvement_data.cta_secondary_label) }}</a>
      <a href="{{ page_field(slug, 'cta_tertiary_url_' ~ lang, involvement_data.cta_tertiary_url) }}" class="inline-flex items-center gap-2 text-sm font-semibold text-white transition hover:text-white/80">
        <span>{{ page_field(slug, 'cta_tertiary_label_' ~ lang, involvement_data.cta_tertiary_label) }}</span>
        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M5 12h14" />
          <path d="M13 6l6 6-6 6" />
        </svg>
      </a>
    </div>
    <p class="mt-6 text-sm text-white/70">{{ page_field(slug, 'donation_text_' ~ lang, involvement_data.donation_text)|raw }}</p>
  </div>
</section>

