{% extends "base.twig" %}

{% block content %}
{% set lang = language ?? 'fi' %}

{% set hero_defaults = {
  'fi': {
    'eyebrow': 'Ratkaisukeskeinen lyhytterapia',
    'title': 'Rauhallista muutosta – yksi keskustelu kerrallaan',
    'cta_primary_label': 'Varaa aika',
    'cta_primary_url': '#',
    'cta_secondary_label': 'Lue lisää terapiasta',
    'cta_secondary_url': '/terapia'
  },
  'en': {
    'eyebrow': 'Solution-focused brief therapy',
    'title': 'Peaceful change – one conversation at a time',
    'cta_primary_label': 'Book a session',
    'cta_primary_url': '#',
    'cta_secondary_label': 'Learn about therapy',
    'cta_secondary_url': '/terapia?lang=en'
  }
} %}
{% set hero_body_defaults = {
  'fi': '<p>Ratkaisukeskeinen lyhytterapia auttaa sinua löytämään toivoa, voimavaroja ja suuntaa elämään silloin, kun asiat tuntuvat jumittuneilta. Yhdessä tutkimme, mikä jo toimii elämässäsi ja miten voimme rakentaa siitä eteenpäin.</p>',
  'en': '<p>Solution-focused brief therapy helps you find hope, resources, and direction in life when things feel stuck. Together we explore what already works in your life and how we can build on that.</p>'
} %}
{% set hero_default = hero_defaults[lang] ?? hero_defaults.fi %}
{% set hero_body_default = hero_body_defaults[lang] ?? hero_body_defaults.fi %}

<section id="hero" class="relative overflow-hidden bg-gradient-to-br from-brand-wood via-brand-pine to-brand-mist text-brand-white">
  <div class="absolute inset-0 bg-hero-pattern opacity-40"></div>
  <div class="absolute inset-0 bg-accent-glow opacity-40"></div>
  <div class="relative mx-auto max-w-6xl px-4 py-16 md:py-20">
    <div class="max-w-3xl space-y-6">
      <span class="eyebrow text-white/70">{{ page_field('frontpage-hero', 'eyebrow_' ~ lang, hero_default.eyebrow) }}</span>
      <h2 class="text-4xl font-semibold tracking-tight md:text-5xl">{{ page_field('frontpage-hero', 'title_' ~ lang, hero_default.title) }}</h2>
      <div class="prose prose-invert max-w-none text-base text-white/80 md:text-lg">
        {{ page_field('frontpage-hero', 'content_' ~ lang, hero_body_default)|raw }}
      </div>
      <div class="flex flex-wrap items-center gap-3">
        <a href="{{ page_field('frontpage-hero', 'cta_primary_url_' ~ lang, hero_default.cta_primary_url) }}" class="btn-primary">{{ page_field('frontpage-hero', 'cta_primary_label_' ~ lang, hero_default.cta_primary_label) }}</a>
        <a href="{{ page_field('frontpage-hero', 'cta_secondary_url_' ~ lang, hero_default.cta_secondary_url) }}" class="btn-secondary">{{ page_field('frontpage-hero', 'cta_secondary_label_' ~ lang, hero_default.cta_secondary_label) }}</a>
      </div>
    </div>
  </div>
</section>

{% set instagram_defaults = {
  'fi': {
    'eyebrow': 'Seuraa minua',
    'title': 'Instagram',
    'copy': 'Seuraa minua Instagramissa saadaksesi vinkkejä hyvinvoinnista ja terapiasta.',
    'placeholder': 'Instagram-feed lisätään tähän myöhemmin.',
    'cta_label': 'Seuraa Instagramissa'
  },
  'en': {
    'eyebrow': 'Follow me',
    'title': 'Instagram',
    'copy': 'Follow me on Instagram for tips on wellbeing and therapy.',
    'placeholder': 'Instagram feed will be added here later.',
    'cta_label': 'Follow on Instagram'
  }
} %}
{% set instagram_default = instagram_defaults[lang] ?? instagram_defaults.fi %}

<section id="instagram" class="bg-gradient-to-br from-brand-wood via-brand-pine to-brand-mist py-16 md:py-20">
  <div class="mx-auto max-w-4xl px-4">
    <div class="text-center">
      <span class="eyebrow text-white/80">{{ page_field('frontpage-instagram', 'eyebrow_' ~ lang, instagram_default.eyebrow) }}</span>
      <h2 class="section-heading text-white mt-2">{{ page_field('frontpage-instagram', 'title_' ~ lang, instagram_default.title) }}</h2>
      <p class="section-copy text-white/80 mt-3">{{ page_field('frontpage-instagram', 'copy_' ~ lang, instagram_default.copy) }}</p>
    </div>
    <div class="mt-8 rounded-3xl border border-white/20 bg-white/10 p-6 backdrop-blur">
      <div id="instagram-feed" class="grid grid-cols-3 gap-2">
        {% for i in 1..6 %}
          <div class="aspect-square rounded-xl bg-white/20 flex items-center justify-center text-xs text-white/60">
            <span class="sr-only">Instagram post placeholder</span>
          </div>
        {% endfor %}
      </div>
      <p class="mt-4 text-center text-sm text-white/70">{{ page_field('frontpage-instagram', 'placeholder_text_' ~ lang, instagram_default.placeholder) }}</p>
      <div class="mt-6 text-center">
        <a href="#" class="btn-secondary">{{ page_field('frontpage-instagram', 'cta_label_' ~ lang, instagram_default.cta_label) }}</a>
      </div>
    </div>
  </div>
</section>

{% set news_defaults = {
  'fi': {
    'eyebrow': 'Ajankohtaista',
    'title': 'Blogi ja ajatuksia',
    'copy': '<p>Lue ajatuksiani terapiasta, hyvinvoinnista ja elämän haasteista.</p>',
    'cta_label': 'Kaikki artikkelit',
    'cta_url': '/blogi',
    'empty': 'Artikkeleita on tulossa pian – seuraa minua somessa pysyäksesi ajan tasalla.'
  },
  'en': {
    'eyebrow': 'Latest',
    'title': 'Blog and thoughts',
    'copy': '<p>Read my thoughts on therapy, wellbeing, and life challenges.</p>',
    'cta_label': 'All articles',
    'cta_url': '/blogi?lang=en',
    'empty': 'Articles coming soon—follow me on social media to stay in the loop.'
  }
} %}
{% set news_default = news_defaults[lang] ?? news_defaults.fi %}

<section id="uutiset" class="bg-gradient-to-br from-brand-wood via-brand-pine to-brand-mist py-16 text-brand-white md:py-20">
  <div class="mx-auto max-w-6xl px-4">
    <div class="md:flex md:items-end md:justify-between">
      <div class="md:max-w-xl">
        <span class="eyebrow text-white/80">{{ page_field('frontpage-news', 'eyebrow_' ~ lang, news_default.eyebrow) }}</span>
        <h2 class="section-heading text-white">{{ page_field('frontpage-news', 'title_' ~ lang, news_default.title) }}</h2>
        <div class="prose prose-invert max-w-none text-sm text-white/80">
          {{ page_field('frontpage-news', 'content_' ~ lang, news_default.copy)|raw }}
        </div>
      </div>
      <a href="{{ page_field('frontpage-news', 'cta_url_' ~ lang, news_default.cta_url) }}" class="btn-secondary mt-6 md:mt-0">{{ page_field('frontpage-news', 'cta_label_' ~ lang, news_default.cta_label) }}</a>
    </div>
    {% if posts %}
      <div class="mt-12 grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {% for post in posts %}
          {{ include('card.twig', {
            title: post.title,
            link: post.link,
            meta: post.date(lang == 'fi' ? 'j.n.Y' : 'F j, Y'),
            content: post.preview(30),
            image: post.thumbnail ? post.thumbnail.src('large') : null,
          }) }}
        {% endfor %}
      </div>
    {% else %}
      <p class="mt-10 text-base text-white/70">{{ page_field('frontpage-news', 'empty_message_' ~ lang, news_default.empty) }}</p>
    {% endif %}
  </div>
</section>

{% set overview_defaults = {
  'fi': {
    'eyebrow': 'Palvelut',
    'title': 'Miten voin auttaa',
    'cards': [
      { 'title': 'Terapia', 'copy': 'Ratkaisukeskeinen lyhytterapia auttaa sinua löytämään toivoa ja suuntaa elämään.', 'cta_label': 'Lue lisää', 'cta_url': '/terapia' },
      { 'title': 'Hinnasto', 'copy': 'Selkeät hinnat eri palveluille. Varaa aika vastaanotolleni.', 'cta_label': 'Katso hinnasto', 'cta_url': '/hinnasto' },
      { 'title': 'Lahjakortit', 'copy': 'Anna terapeuttinen lahjakortti läheisellesi.', 'cta_label': 'Lue lisää', 'cta_url': '/lahjakortit' }
    ]
  },
  'en': {
    'eyebrow': 'Services',
    'title': 'How I can help',
    'cards': [
      { 'title': 'Therapy', 'copy': 'Solution-focused brief therapy helps you find hope and direction in life.', 'cta_label': 'Learn more', 'cta_url': '/terapia?lang=en' },
      { 'title': 'Pricing', 'copy': 'Clear pricing for different services. Book an appointment at my office.', 'cta_label': 'View pricing', 'cta_url': '/hinnasto?lang=en' },
      { 'title': 'Gift cards', 'copy': 'Give a therapeutic gift card to someone close to you.', 'cta_label': 'Learn more', 'cta_url': '/lahjakortit?lang=en' }
    ]
  }
} %}
{% set overview_default = overview_defaults[lang] ?? overview_defaults.fi %}
{% set overview_cards = page_field_cards('frontpage-overview', 'cards_' ~ lang, overview_default.cards) %}

<section id="overview" class="bg-gradient-to-br from-brand-wood via-brand-pine to-brand-mist py-16 md:py-20">
  <div class="mx-auto max-w-6xl px-4">
    <span class="eyebrow text-white/80">{{ page_field('frontpage-overview', 'eyebrow_' ~ lang, overview_default.eyebrow) }}</span>
    <h2 class="section-heading text-white">{{ page_field('frontpage-overview', 'title_' ~ lang, overview_default.title) }}</h2>
    <div class="mt-12 grid gap-8 md:grid-cols-3">
      {% for card in overview_cards %}
        <article class="flex h-full flex-col rounded-3xl border border-white/20 bg-white/10 p-6 backdrop-blur shadow-soft transition duration-150 hover:-translate-y-1 hover:border-white/30">
          <h3 class="text-lg font-semibold text-white">{{ card.title }}</h3>
          <p class="mt-3 text-sm text-white/80">{{ card.copy }}</p>
          <div class="mt-auto pt-6">
            <a href="{{ card.cta_url }}" class="inline-flex items-center gap-2 text-sm font-semibold text-white transition hover:text-white/80">
              <span>{{ card.cta_label }}</span>
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M5 12h14" />
                <path d="M13 6l6 6-6 6" />
              </svg>
            </a>
          </div>
        </article>
      {% endfor %}
    </div>
  </div>
</section>

{% set contact_defaults = {
  'fi': {
    'eyebrow': 'Yhteystiedot',
    'title': 'Ota yhteyttä',
    'copy': 'Ota rohkeasti yhteyttä, jos haluat keskustella terapiasta tai varata ajan.',
    'general_label': 'Sähköposti:',
    'phone_label': 'Puhelin:',
    'address_label': 'Osoite:',
    'social_heading': 'Seuraa minua'
  },
  'en': {
    'eyebrow': 'Contact',
    'title': 'Get in touch',
    'copy': 'Feel free to reach out if you want to discuss therapy or book an appointment.',
    'general_label': 'Email:',
    'phone_label': 'Phone:',
    'address_label': 'Address:',
    'social_heading': 'Follow me'
  }
} %}
{% set contact_default = contact_defaults[lang] ?? contact_defaults.fi %}
{% set contact_email = page_field('frontpage-contact', 'general_contact_email_' ~ lang, 'terapia@terapiahuvi.fi') %}
{% set contact_phone = page_field('frontpage-contact', 'contact_phone_' ~ lang, '+358 44 999 2092') %}
{% set contact_address = page_field('frontpage-contact', 'contact_address_' ~ lang, lang == 'fi' ? 'Aleksanterinkatu 29 B 18, 33100 Tampere' : 'Aleksanterinkatu 29 B 18, 33100 Tampere, Finland') %}

<section id="yhteystiedot" class="bg-gradient-to-br from-brand-wood via-brand-pine to-brand-mist py-16 text-brand-white md:py-20">
  <div class="mx-auto max-w-4xl px-4">
    <div class="text-center">
      <span class="eyebrow text-white/80">{{ page_field('frontpage-contact', 'eyebrow_' ~ lang, contact_default.eyebrow) }}</span>
      <h2 class="section-heading text-white mt-2">{{ page_field('frontpage-contact', 'title_' ~ lang, contact_default.title) }}</h2>
      <p class="section-copy text-white/80 mt-3">{{ page_field('frontpage-contact', 'copy_' ~ lang, contact_default.copy) }}</p>
    </div>
    <div class="mt-10 grid gap-6 md:grid-cols-2">
      <div class="rounded-3xl border border-white/20 bg-white/10 p-6 backdrop-blur">
        <h3 class="text-sm font-semibold uppercase tracking-wide text-white/70 mb-4">{{ page_field('frontpage-contact', 'general_contact_label_' ~ lang, contact_default.general_label) }}</h3>
        <p class="text-lg text-white"><a href="mailto:{{ contact_email }}" class="underline decoration-white/40 decoration-2 underline-offset-4 hover:text-white">{{ contact_email }}</a></p>
      </div>
      <div class="rounded-3xl border border-white/20 bg-white/10 p-6 backdrop-blur">
        <h3 class="text-sm font-semibold uppercase tracking-wide text-white/70 mb-4">{{ page_field('frontpage-contact', 'phone_label_' ~ lang, contact_default.phone_label) }}</h3>
        <p class="text-lg text-white"><a href="tel:+358449992092" class="underline decoration-white/40 decoration-2 underline-offset-4 hover:text-white">{{ contact_phone }}</a></p>
      </div>
    </div>
    <div class="mt-6 rounded-3xl border border-white/20 bg-white/10 p-6 backdrop-blur text-center">
      <h3 class="text-sm font-semibold uppercase tracking-wide text-white/70 mb-2">{{ page_field('frontpage-contact', 'address_label_' ~ lang, contact_default.address_label) }}</h3>
      <p class="text-white">{{ contact_address }}</p>
    </div>
    <div class="mt-8 text-center">
      <a href="#" class="btn-secondary">Varaa aika vastaanotolleni</a>
    </div>
  </div>
</section>
{% endblock %}

