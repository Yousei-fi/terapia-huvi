{% extends "base.twig" %}

{% block content %}
{% set lang = language ?? 'fi' %}

{% set hero_defaults = {
  'fi': {
    'eyebrow': 'Yhdessä humaanin päihdepolitiikan puolesta',
    'title': 'Rakennamme turvallista päihdepolitiikkaa ihmisarvo edellä',
    'cta_primary_label': 'Liity jäseneksi',
    'cta_primary_url': '/osallistu',
    'cta_secondary_label': 'Lue ajankohtaista',
    'cta_secondary_url': '#uutiset'
  },
  'en': {
    'eyebrow': 'Together for humane drug policy',
    'title': 'Building safer drug policy with dignity first',
    'cta_primary_label': 'Become a member',
    'cta_primary_url': '/en/get-involved',
    'cta_secondary_label': 'Latest updates',
    'cta_secondary_url': '#uutiset'
  }
} %}
{% set hero_body_defaults = {
  'fi': '<p>HPP on vuonna 2001 perustettu päihdepoliittinen järjestö, joka kokoaa yhteen kokemusasiantuntijat, ammattilaiset ja päättäjät, jotta päihdepolitiikka perustuu tietoon ja vähentää haittoja. Olemme International Drug Policy Consortium -verkoston jäsen ja edistämme haittoja minimoivaa käyttöä, turvaavaa palvelujärjestelmää ja oikeudenmukaista politiikkaa.</p>',
  'en': '<p>Founded in 2001, HPP brings together lived experts, professionals, and decision-makers to ensure drug policy is evidence-based and harm-reducing. As a member of the International Drug Policy Consortium, we champion informed use, resilient services, and fair policies.</p>'
} %}
{% set hero_default = hero_defaults[lang] ?? hero_defaults.fi %}
{% set hero_body_default = hero_body_defaults[lang] ?? hero_body_defaults.fi %}

<section id="hero" class="relative overflow-hidden bg-brand-charcoal text-brand-white">
  <div class="absolute inset-0 bg-hero-pattern opacity-40"></div>
  <div class="absolute inset-0 bg-accent-glow opacity-40"></div>
  <div class="relative mx-auto max-w-6xl px-4 py-16 md:py-20">
    <div class="max-w-3xl space-y-6">
      <span class="eyebrow text-white/70">{{ page_field('frontpage-hero', 'eyebrow_' ~ lang, hero_default.eyebrow) }}</span>
      <h2 class="text-4xl font-semibold tracking-tight md:text-5xl">{{ page_field('frontpage-hero', 'title_' ~ lang, hero_default.title) }}</h2>
      <div class="prose prose-invert max-w-none text-base text-white/80 md:text-lg">
        {{ page_field('frontpage-hero', 'content_' ~ lang, hero_body_default)|raw }}
      </div>
      <div class="flex flex-wrap items-center gap-3">
        <a href="{{ page_field('frontpage-hero', 'cta_primary_url_' ~ lang, hero_default.cta_primary_url) }}" class="btn-primary">{{ page_field('frontpage-hero', 'cta_primary_label_' ~ lang, hero_default.cta_primary_label) }}</a>
        <a href="{{ page_field('frontpage-hero', 'cta_secondary_url_' ~ lang, hero_default.cta_secondary_url) }}" class="btn-secondary">{{ page_field('frontpage-hero', 'cta_secondary_label_' ~ lang, hero_default.cta_secondary_label) }}</a>
      </div>
    </div>
  </div>
</section>

{% set social_defaults = {
  'fi': {
    'eyebrow': 'Seuraa ja osallistu',
    'title': 'Suora yhteys yhteisöön',
    'copy': 'Poimimme näkyville videomme ja sosiaalisen median syötteet, jotta pysyt mukana työssämme.',
    'youtube_placeholder': 'Video-embed lisätään tähän, kun lisäosa otetaan käyttöön.',
    'youtube_cta': 'Katso YouTubessa',
    'facebook_placeholder': 'Facebook-feed lisätään tähän myöhemmin lisäosan avulla.',
    'facebook_primary': 'Avaa Facebookissa',
    'facebook_secondary': 'Seuraa myös X:ssä'
  },
  'en': {
    'eyebrow': 'Stay connected',
    'title': 'Direct line to our community',
    'copy': 'Watch our latest videos and social feeds to stay close to the work in real time.',
    'youtube_placeholder': 'The embedded feed will surface here once the integration is enabled.',
    'youtube_cta': 'Watch on YouTube',
    'facebook_placeholder': 'The Facebook feed will appear here once the integration is active.',
    'facebook_primary': 'Open on Facebook',
    'facebook_secondary': 'Follow us on X'
  }
} %}
{% set social_default = social_defaults[lang] ?? social_defaults.fi %}

<section id="social-hub" class="bg-white py-16 md:py-20">
  <div class="mx-auto max-w-6xl px-4">
    <div class="md:flex md:items-end md:justify-between">
      <div class="md:max-w-xl">
        <span class="eyebrow">{{ page_field('frontpage-social', 'eyebrow_' ~ lang, social_default.eyebrow) }}</span>
        <h2 class="section-heading">{{ page_field('frontpage-social', 'title_' ~ lang, social_default.title) }}</h2>
        <p class="section-copy">{{ page_field('frontpage-social', 'copy_' ~ lang, social_default.copy) }}</p>
      </div>
      <div class="mt-6 flex gap-2 text-xs font-semibold uppercase tracking-wide text-slate-500 md:mt-0">
        <a href="https://www.facebook.com/hppry/" class="inline-flex items-center gap-2 rounded-full bg-brand-charcoal px-4 py-2 text-white transition hover:bg-brand-charcoal/90" target="_blank" rel="noopener">Facebook</a>
        <a href="https://www.youtube.com/@hppry" class="inline-flex items-center gap-2 rounded-full bg-brand-wood px-4 py-2 text-white transition hover:bg-brand-wood/90" target="_blank" rel="noopener">YouTube</a>
      </div>
    </div>
    <div class="mt-12 grid gap-8 lg:grid-cols-2">
      <article class="rounded-3xl border border-brand-wood/20 bg-brand-birch p-6 shadow-sm shadow-brand-wood/10">
        <h3 class="text-lg font-semibold text-slate-900">{{ page_field('frontpage-video', 'title_' ~ lang, social_default.youtube_cta) }}</h3>
        <p class="mt-3 text-sm text-slate-600">{{ page_field('frontpage-video', 'copy_' ~ lang, social_default.copy) }}</p>
        <div class="mt-6 rounded-2xl border border-brand-wood/20 bg-white p-4 shadow-inner">
          <div id="hpp-youtube-feed" class="aspect-video w-full rounded-xl bg-brand-birch/80 flex items-center justify-center text-sm text-slate-600">
            <span>{{ page_field('frontpage-video', 'placeholder_text_' ~ lang, social_default.youtube_placeholder) }}</span>
          </div>
        </div>
        <a href="https://www.youtube.com/@hppry" class="btn-primary mt-6 inline-flex" target="_blank" rel="noopener">{{ page_field('frontpage-video', 'cta_label_' ~ lang, social_default.youtube_cta) }}</a>
      </article>
      <article class="rounded-3xl border border-brand-wood/20 bg-brand-birch p-6 shadow-sm shadow-brand-wood/10">
        <h3 class="text-lg font-semibold text-slate-900">{{ page_field('frontpage-facebook', 'title_' ~ lang, 'Facebook') }}</h3>
        <p class="mt-3 text-sm text-slate-600">{{ page_field('frontpage-facebook', 'copy_' ~ lang, social_default.copy) }}</p>
        <div class="mt-6 rounded-2xl border border-brand-wood/20 bg-white p-4 shadow-inner">
          <div id="hpp-facebook-feed" class="h-72 w-full rounded-xl bg-brand-birch/60 flex items-center justify-center text-sm text-slate-600">
            <span>{{ page_field('frontpage-facebook', 'placeholder_text_' ~ lang, social_default.facebook_placeholder) }}</span>
          </div>
        </div>
        <div class="mt-6 flex flex-wrap gap-3">
          <a href="https://www.facebook.com/hppry/" class="btn-secondary" target="_blank" rel="noopener">{{ page_field('frontpage-facebook', 'primary_label_' ~ lang, social_default.facebook_primary) }}</a>
          <a href="https://twitter.com/HPPry" class="inline-flex items-center gap-2 text-sm font-semibold text-brand-wood transition hover:text-brand-wood/80" target="_blank" rel="noopener">
            <span>{{ page_field('frontpage-facebook', 'secondary_label_' ~ lang, social_default.facebook_secondary) }}</span>
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M5 12h14" />
              <path d="M13 6l6 6-6 6" />
            </svg>
          </a>
        </div>
      </article>
    </div>
  </div>
</section>

{% set news_defaults = {
  'fi': {
    'eyebrow': 'Ajankohtaista',
    'title': 'Uutiset ja tarinat liikkeestämme',
    'copy': '<p>Kentältä, politiikasta ja vapaaehtoistyöstä kantautuvat kuulumiset kertovat työn vaikutuksesta. Lue uusimmat päivitykset ja tule mukaan muuttamaan suuntaa.</p>',
    'cta_label': 'Kaikki uutiset',
    'cta_url': '/blogi',
    'empty': 'Tarinoita on tulossa pian – seuraa meitä somessa tai liity sähköpostilistalle pysyäksesi ajan tasalla.'
  },
  'en': {
    'eyebrow': 'Latest',
    'title': 'News and stories from our movement',
    'copy': '<p>Field updates, policy breakthroughs, and volunteer stories show the impact we create together. Dive into the latest highlights.</p>',
    'cta_label': 'All articles',
    'cta_url': '/en/news',
    'empty': 'Fresh stories are on their way—follow us on social or join our newsletter to stay in the loop.'
  }
} %}
{% set news_default = news_defaults[lang] ?? news_defaults.fi %}

<section id="uutiset" class="bg-brand-charcoal py-16 text-brand-white md:py-20">
  <div class="mx-auto max-w-6xl px-4">
    <div class="md:flex md:items-end md:justify-between">
      <div class="md:max-w-xl">
        <span class="eyebrow text-white/80">{{ page_field('frontpage-news', 'eyebrow_' ~ lang, news_default.eyebrow) }}</span>
        <h2 class="section-heading text-white">{{ page_field('frontpage-news', 'title_' ~ lang, news_default.title) }}</h2>
        <div class="prose prose-invert max-w-none text-sm text-white/80">
          {{ page_field('frontpage-news', 'content_' ~ lang, news_default.copy)|raw }}
        </div>
      </div>
      <a href="{{ page_field('frontpage-news', 'cta_url_' ~ lang, news_default.cta_url) }}" class="btn-secondary mt-6 md:mt-0">{{ page_field('frontpage-news', 'cta_label_' ~ lang, news_default.cta_label) }}</a>
    </div>
    {% if posts %}
      <div class="mt-12 grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {% for post in posts %}
          {{ include('card.twig', {
            title: post.title,
            link: post.link,
            meta: post.date(lang == 'fi' ? 'j.n.Y' : 'F j, Y'),
            content: post.preview(30),
            image: post.thumbnail ? post.thumbnail.src('large') : null,
          }) }}
        {% endfor %}
      </div>
    {% else %}
      <p class="mt-10 text-base text-white/70">{{ page_field('frontpage-news', 'empty_message_' ~ lang, news_default.empty) }}</p>
    {% endif %}
  </div>
</section>

{% set overview_defaults = {
  'fi': {
    'eyebrow': 'Tutustu syvemmin',
    'title': 'Näin vaikutamme',
    'cards': [
      { 'title': 'Missio', 'copy': 'Miten rakennamme yhteiskuntaa, jossa apu on saavutettavaa ja inhimillistä.', 'cta_label': 'Lue lisää', 'cta_url': '/missio' },
      { 'title': 'Teesit', 'copy': 'Kymmenen periaatetta, jotka ohjaavat humaania päihdepolitiikkaamme.', 'cta_label': 'Tutustu teesihin', 'cta_url': '/teesit' },
      { 'title': 'Tietopyynnöt', 'copy': 'Avoimuutta viranomaistoimintaan – julkaistut tietopyynnöt ja vastaukset.', 'cta_label': 'Avaa arkisto', 'cta_url': '/tietopyynnot' }
    ]
  },
  'en': {
    'eyebrow': 'Explore further',
    'title': 'Where our impact happens',
    'cards': [
      { 'title': 'Mission', 'copy': 'See how we build services and policies that centre dignity.', 'cta_label': 'Read the mission', 'cta_url': '/en/mission' },
      { 'title': 'Principles', 'copy': 'Ten principles that anchor humane drug policy reform.', 'cta_label': 'View the principles', 'cta_url': '/en/principles' },
      { 'title': 'Information requests', 'copy': 'Transparency in practice—discover our published requests and responses.', 'cta_label': 'Open the archive', 'cta_url': '/en/information-requests' }
    ]
  }
} %}
{% set overview_default = overview_defaults[lang] ?? overview_defaults.fi %}
{% set overview_cards = page_field_cards('frontpage-overview', 'cards_' ~ lang, overview_default.cards) %}

<section id="overview" class="bg-white py-16 md:py-20">
  <div class="mx-auto max-w-6xl px-4">
    <span class="eyebrow">{{ page_field('frontpage-overview', 'eyebrow_' ~ lang, overview_default.eyebrow) }}</span>
    <h2 class="section-heading">{{ page_field('frontpage-overview', 'title_' ~ lang, overview_default.title) }}</h2>
    <div class="mt-12 grid gap-8 md:grid-cols-3">
      {% for card in overview_cards %}
        <article class="flex h-full flex-col rounded-3xl border border-brand-wood/10 bg-brand-birch p-6 shadow-sm shadow-brand-wood/10 transition duration-150 hover:-translate-y-1 hover:border-brand-wood/30">
          <h3 class="text-lg font-semibold text-slate-900">{{ card.title }}</h3>
          <p class="mt-3 text-sm text-slate-600">{{ card.copy }}</p>
          <div class="mt-auto pt-6">
            <a href="{{ card.cta_url }}" class="inline-flex items-center gap-2 text-sm font-semibold text-brand-wood transition hover:text-brand-wood/80">
              <span>{{ card.cta_label }}</span>
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M5 12h14" />
                <path d="M13 6l6 6-6 6" />
              </svg>
            </a>
          </div>
        </article>
      {% endfor %}
    </div>
  </div>
</section>

{% set contact_defaults = {
  'fi': {
    'eyebrow': 'Yhteystiedot',
    'title': 'Ota yhteyttä',
    'copy': 'Tavoitat meidät nopeiten sähköpostitse. Hallituksen jäsenten osoitteet ovat muodossa etunimi.sukunimi@hppry.fi.',
    'general_label': 'Yleinen yhteys:',
    'chair_label': 'Puheenjohtaja:',
    'vice_label': 'Varapuheenjohtaja:',
    'board_label': 'Hallituksen jäsenet:',
    'social_heading': 'Seuraa meitä',
    'holvi_label': 'Holvi-verkkokauppa'
  },
  'en': {
    'eyebrow': 'Contact',
    'title': 'Get in touch',
    'copy': 'Email is the fastest way to reach us. Board members use the format firstname.lastname@hppry.fi.',
    'general_label': 'General inquiries:',
    'chair_label': 'Chairperson:',
    'vice_label': 'Vice Chair:',
    'board_label': 'Board members:',
    'social_heading': 'Follow us',
    'holvi_label': 'Holvi web shop'
  }
} %}
{% set contact_default = contact_defaults[lang] ?? contact_defaults.fi %}
{% set contact_email = page_field('frontpage-contact', 'general_contact_email_' ~ lang, 'hpp@hppry.fi') %}

<section id="yhteystiedot" class="bg-brand-charcoal py-16 text-brand-white md:py-20">
  <div class="mx-auto max-w-6xl px-4">
    <span class="eyebrow text-white/80">{{ page_field('frontpage-contact', 'eyebrow_' ~ lang, contact_default.eyebrow) }}</span>
    <h2 class="section-heading text-white">{{ page_field('frontpage-contact', 'title_' ~ lang, contact_default.title) }}</h2>
    <p class="section-copy text-white/80">{{ page_field('frontpage-contact', 'copy_' ~ lang, contact_default.copy) }}</p>
    <div class="mt-8 grid gap-8 md:grid-cols-2">
      <div class="space-y-3 text-sm text-white/75">
        <p><strong>{{ page_field('frontpage-contact', 'general_contact_label_' ~ lang, contact_default.general_label) }}</strong> <a href="mailto:{{ contact_email }}" class="underline decoration-white/40 decoration-2 underline-offset-4 hover:text-white">{{ contact_email }}</a></p>
        <p><strong>{{ page_field('frontpage-contact', 'chair_label_' ~ lang, contact_default.chair_label) }}</strong> {{ page_field('frontpage-contact', 'chair_value_' ~ lang, lang == 'fi' ? 'Timo Pasanen' : 'Timo Pasanen') }}</p>
        <p><strong>{{ page_field('frontpage-contact', 'vice_chair_label_' ~ lang, contact_default.vice_label) }}</strong> {{ page_field('frontpage-contact', 'vice_chair_value_' ~ lang, lang == 'fi' ? 'Tiina Poutiainen' : 'Tiina Poutiainen') }}</p>
        <p><strong>{{ page_field('frontpage-contact', 'board_members_label_' ~ lang, contact_default.board_label) }}</strong> {{ page_field('frontpage-contact', 'board_members_value_' ~ lang, lang == 'fi' ? 'Aleksi Hupli, Miina Kajos, Mikko Neuvo' : 'Aleksi Hupli, Miina Kajos, Mikko Neuvo') }}</p>
      </div>
      <div class="space-y-4">
        <h3 class="text-sm font-semibold uppercase tracking-wide text-white/70">{{ page_field('frontpage-contact', 'social_heading_' ~ lang, contact_default.social_heading) }}</h3>
        <div class="flex flex-wrap gap-3 text-sm font-semibold text-brand-wood">
          <a href="https://www.facebook.com/hppry/" class="transition hover:text-brand-wood/80" target="_blank" rel="noopener">{{ page_field('frontpage-contact', 'social_facebook_label_' ~ lang, lang == 'fi' ? 'Facebook' : 'Facebook') }}</a>
          <a href="https://twitter.com/HPPry" class="transition hover:text-brand-wood/80" target="_blank" rel="noopener">{{ page_field('frontpage-contact', 'social_x_label_' ~ lang, lang == 'fi' ? 'X (Twitter)' : 'X (Twitter)') }}</a>
          <a href="https://www.instagram.com/humaaniapaihdepolitiikkaa/" class="transition hover:text-brand-wood/80" target="_blank" rel="noopener">{{ page_field('frontpage-contact', 'social_instagram_label_' ~ lang, 'Instagram') }}</a>
          <a href="https://www.youtube.com/@hppry" class="transition hover:text-brand-wood/80" target="_blank" rel="noopener">{{ page_field('frontpage-contact', 'social_youtube_label_' ~ lang, 'YouTube') }}</a>
          <a href="https://www.tiktok.com/@hppry" class="transition hover:text-brand-wood/80" target="_blank" rel="noopener">{{ page_field('frontpage-contact', 'social_tiktok_label_' ~ lang, 'TikTok') }}</a>
        </div>
        <a href="https://holvi.com/shop/hpp-ry/" class="inline-flex items-center gap-2 text-sm font-semibold text-brand-wood transition hover:text-brand-wood/80" target="_blank" rel="noopener">
          <span>{{ page_field('frontpage-contact', 'holvi_label_' ~ lang, contact_default.holvi_label) }}</span>
          <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M5 12h14" />
            <path d="M13 6l6 6-6 6" />
          </svg>
        </a>
      </div>
    </div>
  </div>
</section>
{% endblock %}

